{{ 'section-featured-slider.css' | asset_url | stylesheet_tag }}

<div class="featured-slider swiper-container">
  <div class="swiper-wrapper">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'slider' %}
          <div class="swiper-slide featured-slider__item">
            {% liquid
              assign image_height = block.settings.image.width | divided_by: block.settings.image.aspect_ratio
              assign image_class = 'featured-slider__item--image'
              assign sizes = '120vw'
              assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840'
              assign fetch_priority = 'auto'
            %}
            {% if block.settings.image != blank %}
              {{
                block.settings.image
                | image_url: width: 3840
                | image_tag:
                  width: block.settings.image.width,
                  height: image_height,
                  class: image_class,
                  sizes: sizes,
                  widths: widths,
                  fetchpriority: fetch_priority
              }}
            {% else %}
              <div class="banner__media media{% if section.settings.image == blank and section.settings.image_2 == blank %} placeholder{% endif %}{% if section.settings.image_2 != blank %} banner__media-half{% endif %}{% if section.settings.image_behavior != 'none' %} animate--{{ section.settings.image_behavior }}{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
                {{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
              </div>
            {% endif %}
          </div>
      {% endcase %}
    {% endfor %}
  </div>

  <!-- Custom Navigation Buttons -->
  <div class="featured-slider__btn featured-slider__btn-prev">
    {{- 'icon-arrow-prev.svg' | inline_asset_content -}}
  </div>
  <div class="featured-slider__btn featured-slider__btn-next">
    {{- 'icon-arrow.svg' | inline_asset_content -}}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const featuredSlider = new Swiper('.swiper-container', {
      slidesPerView: 1,
      spaceBetween: 0,
      navigation: {
        nextEl: '.featured-slider__btn-next',
        prevEl: '.featured-slider__btn-prev',
      },
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
    });
  });
</script>

{% schema %}
{
  "name": "Featured Slider",
  "settings": [],
  "blocks": [
    {
      "type": "slider",
      "name": "Slider",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "default": "Default Title",
          "label": "Title"
        },
        {
          "type": "text",
          "id": "button_text",
          "default": "Button Text",
          "label": "Button Text"
        },
        {
          "type": "select",
          "id": "button_type",
          "options": [
            {
              "label": "Primary",
              "value": "primary"
            },
            {
              "label": "Secondary",
              "value": "secondary"
            }
          ],
          "default": "primary",
          "label": "Button Type"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Slider"
    }
  ]
}
{% endschema %}
